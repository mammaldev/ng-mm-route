angular.module("mmRoute",["ngRoute"]).provider("mmRoute",["$routeProvider",function(a){var b=/(:[\w*]+)(\?(?=\/|$))?/g,c=/[:*?]/g,d=/:[^\/]+\?/g;this.setDefaultRoute=function(b){a.otherwise({redirectTo:b}),this.defaultUrl=b},this.setBaseRoute=function(b){a.when("/",{redirectTo:b})},this.setRoleGetter=function(a){this.roleGetter=a},this.parseUrls=function e(a,b){b=b||[];var c=Object.keys(a);if(c.length>0){if(a.hasOwnProperty("url")){var d={url:a.url};return d.routeConf=a.access.length>1||"ALL"!==a.access[0].roles[0]?{template:'<mm-role-resolver route-path="'+b.join(".")+'"></mm-role-resolver>'}:a.access[0].view,[d]}var f=c[0],g=a[f];return delete a[f],e(g,b.concat([f])).concat(e(a,b))}return[]},this.setRoutes=function(b){if(!this.roleGetter)throw new Error("Role getter has not yet been configured. Call setRoles before setRoutes");this.routes=b;var c=this.parseUrls(angular.copy(b));c.forEach(function(b){a.when(b.url.split("?")[0],b.routeConf)})},this.$get=["$location",function(a){function e(a,e){var g=f(a);if(g){var h=g.url,i=h.match(b);return i&&e&&Object.keys(e).forEach(function(a){i.forEach(function(b){var d=b.replace(c,""),f=b.indexOf("*")===b.length-1;f&&a.slice(0,d.length)===d?h=h.replace(b,e[a]):f||a!==d||(h=h.replace(b,e[a]))})}),h=h.replace(d,"")}}function f(a){for(var b=a.split("."),c=i,d=0;d<b.length;d++){var e=b[d];if(!c.hasOwnProperty(e))return null;c=c[e]}return c}function g(b,c){a.url(e(b,c))}function h(){return i}var i=this.routes;return{get:e,goTo:g,getRoute:f,getRoutes:h,roleGetter:this.roleGetter,defaultUrl:this.defaultUrl,_parseUrls:this.parseUrls}}]}]);
//# sourceMappingURL=mm-route.min.js.map